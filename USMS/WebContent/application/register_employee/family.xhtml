<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
  
</h:head>
<h:body>
	<ui:composition>   
	
	<h:outputScript name="family.js" library="javascript"></h:outputScript>
		<ui:include src="/application/register_employee/register_employee_common.xhtml"></ui:include>
		    <fieldset class="fieldset">
		     <legend class="legend" ><font color="orange" size="4">Family Details</font></legend>
			<table id="Family_Details:1"  class="table" cellpadding="10"
				>
				<tbody>
				<tr>
					<td><h:selectBooleanCheckbox id="cb_hasSpouse" value="#{employeeMB.model.hasSpouse}" onclick="spouseSelected(this)" /> &nbsp; <h:outputText
							value="Spouse" styleClass="FormHeading" /></td>
				</tr>
				<tr>
					<td><h:outputText value="First Name" /></td>
					<td><h:inputText id="it_spouse_firstName" styleClass="inputText" value="#{employeeMB.model.spouseInfo.firstName}" 
					disabled="#{menuBean.mode eq 'view'}" /></td>
					
					<td>&nbsp;</td>

					<td><h:outputText value="Middle Name" /></td>
					<td><h:inputText id="it_spouse_middleName" styleClass="inputText" value="not available" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td><h:outputText value="Last Name" /></td>
					<td><h:inputText id="it_spouse_lastName" styleClass="inputText" value="#{employeeMB.model.spouseInfo.lastName}" disabled="#{menuBean.mode eq 'view'}"/></td>
				</tr>
				<tr>
					<td><h:outputText value="Passport No" /></td>
					<td><h:inputText id="it_spouse_passportNo" styleClass="inputText" value="#{employeeMB.model.spouseInfo.passportInfos.ppNo}" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Upload" /></td>
					<td><rich:fileUpload  id="spouse_upload_pasport" acceptedTypes="jpg, gif, png, bmp" fileUploadListener="#{employeeMB.spousePassportCopyUploadListener}"
                		ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="1" listHeight="1" style="width:250px;" >
               		 	<a4j:ajax event="uploadcomplete" execute="@none" />
               		 	<f:attribute name="fileType" value="passport" />
               		 	<f:attribute name="ownerType" value="spouse" />
           		  </rich:fileUpload></td>

				</tr>
				<tr>
					<td><h:outputText value="Medical Insurance Card No" /></td>
					<td><h:inputText id="it_spouse_miCardNo" styleClass="inputText" value="#{employeeMB.model.spouseInfo.miInfos.cardNo}" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Upload" /></td>
					<td><rich:fileUpload  id="spouse_upload_medical" acceptedTypes="jpg, gif, png, bmp" fileUploadListener="#{employeeMB.spousemiCopyUploadListener}"
                		ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="1" listHeight="1" style="width:250px;" >
               		 	<a4j:ajax event="uploadcomplete" execute="@none" />
               		 	<f:attribute name="fileType" value="miCard" />
               		 	<f:attribute name="ownerType" value="spouse" />
           		 </rich:fileUpload></td>

				</tr>



				<tr >
					<td style="padding-top: 30px;"><h:selectBooleanCheckbox value="#{employeeMB.model.hasChild1}" id="cb_hasChild1" onclick="child1Selected(this)" /> &nbsp; <h:outputText
							value="Child 1" styleClass="FormHeading" /></td>
				</tr>
				<tr>
					<td><h:outputText value="First Name" /></td>
					<td><h:inputText id="it_child1_firstName" styleClass="inputText" value="#{employeeMB.model.child1Info.firstName}" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Middle Name" /></td>
					<td><h:inputText id="it_child1_middleName" styleClass="inputText" value="not available" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td><h:outputText value="Last Name" /></td>
					<td><h:inputText id="it_child1_lastName" styleClass="inputText" value="#{employeeMB.model.child1Info.lastName}" disabled="#{menuBean.mode eq 'view'}"/></td>
				</tr>
				<tr>
					<td><h:outputText value="Passport No" /></td>
					<td><h:inputText id="it_child1_passportNo" styleClass="inputText" value="#{employeeMB.model.child1Info.passportInfos.ppNo}" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Upload" /></td>
					<td><rich:fileUpload  id="child1_upload_passport" acceptedTypes="jpg, gif, png, bmp" fileUploadListener="#{employeeMB.child1PassportCopyUploadListener}"
                		ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="1" listHeight="1" style="width:250px;" >
               		 	<a4j:ajax event="uploadcomplete" execute="@none" />
               		 	<f:attribute name="fileType" value="passport" />
               		 	<f:attribute name="ownerType" value="child1" />
           		     </rich:fileUpload>
                     </td>

				</tr>
				<tr>
					<td><h:outputText value="Medical Insurance Card No" /></td>
					<td><h:inputText id="it_child1_miCardNo" styleClass="inputText" value="#{employeeMB.model.child1Info.miInfos.cardNo}" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Upload" /></td>
					<td><rich:fileUpload  id="child1_upload_medical" acceptedTypes="jpg, gif, png, bmp" fileUploadListener="#{employeeMB.child1miCopyUploadListener}"
                		ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="1" listHeight="1" style="width:250px;" >
               		 	<a4j:ajax event="uploadcomplete" execute="@none" />
               		 	<f:attribute name="fileType" value="miCard" />
               		 	<f:attribute name="ownerType" value="child1" />
           		  </rich:fileUpload></td>

				</tr>




				<tr>
					<td style="padding-top: 30px;"><h:selectBooleanCheckbox value="#{employeeMB.model.hasChild2}" id="cb_hasChild2" onclick="child2Selected(this)"/> &nbsp; <h:outputText
							value="Child 2" styleClass="FormHeading" /></td>
				</tr>
				<tr>
					<td><h:outputText value="First Name" /></td>
					<td><h:inputText id="it_child2_firstName" styleClass="inputText" value="#{employeeMB.model.child2Info.firstName}" disabled="#{menuBean.mode eq 'view'}"/></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Middle Name" /></td>
					<td><h:inputText id="it_child2_middleName" styleClass="inputText" value="not available"  disabled="#{menuBean.mode eq 'view'}"/></td>

					<td><h:outputText value="Last Name" /></td>
					<td><h:inputText id="it_child2_lastName" styleClass="inputText" value="#{employeeMB.model.child2Info.lastName}"  disabled="#{menuBean.mode eq 'view'}"/></td>
				</tr>
				<tr>
					<td><h:outputText value="Passport No" /></td>
					<td><h:inputText id="it_child2_passportNo" styleClass="inputText" value="#{employeeMB.model.child2Info.passportInfos.ppNo}" disabled="#{menuBean.mode eq 'view'}" /></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Upload" /></td>
					<td><rich:fileUpload  id="child2_upload_passport" acceptedTypes="jpg, gif, png, bmp" fileUploadListener="#{employeeMB.child2PassportCopyUploadListener}"
                		ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="1" listHeight="1" style="width:250px;" >
               		 	<a4j:ajax event="uploadcomplete" execute="@none" />
               		 	<f:attribute name="fileType" value="passport" />
               		 	<f:attribute name="ownerType" value="child2" />
           		 </rich:fileUpload></td>

				</tr>
				<tr>
					<td><h:outputText value="Medical Insurance Card No" /></td>
					<td><h:inputText id="it_child2_miCardNo" styleClass="inputText" value="#{employeeMB.model.child2Info.miInfos.cardNo}"  disabled="#{menuBean.mode eq 'view'}"/></td>

					<td>&nbsp;</td>

					<td><h:outputText value="Upload" /></td>
					<td><rich:fileUpload  id="child2_upload_medical" acceptedTypes="jpg, gif, png, bmp" fileUploadListener="#{employeeMB.child2miCopyUploadListener}"
                		ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="1" listHeight="1" style="width:250px;" >
               		 	<a4j:ajax event="uploadcomplete" execute="@none" />
               		 	<f:attribute name="fileType" value="miCard" />
               		 	<f:attribute name="ownerType" value="child2" />
           		  </rich:fileUpload></td>
                     
				</tr>

				<tr>
					<td colspan="7" style="padding-top: 30px;">
						<center>
							<h:button value="Reset"
								styleClass="orange" style="height:30px; width:60px;" />
							&nbsp;&nbsp;&nbsp;
							<a4j:commandButton id="familyFile" value="Save"   
							execute="@form"  actionListener="#{employeeMB.updateEmployee}" styleClass="green" style="height:30px; width:60px;"
							rendered="#{menuBean.mode eq 'update'}"/>  &nbsp;&nbsp;&nbsp;
							<a4j:commandButton value="Next"  actionListener="#{employeeMB.updateFamilyDetails}"
								 render="centreContentForm,transactionSucces" disabled="#{menuBean.mode eq 'view'}"
								 styleClass="green" style="height:30px; width:60px;"  oncomplete="changePage('/application/register_employee/success_transaction.xhtml')" />
						</center>
					</td>
				</tr>  

             </tbody>
			</table>
			</fieldset>
			<script >
	
			
				var navToAirTicketReimb =  function() {
					alert("reached");
					alert($J("#centreContentForm\\:prevStepValidatedStatus").attr("value"));
					if($J("#centreContentForm\\:prevStepValidatedStatus").attr("value") == 'true')
						{
						changeCenterPage('/application/register_employee/airticket_reimb.xhtml','airticket_item');
					    validate(false);
						}
					else
						alert("Validation Not Passed From Server Side")
					};
			
			</script>
	</ui:composition>
</h:body>
</html>
