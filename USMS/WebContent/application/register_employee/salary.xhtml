<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 
   
<h:head></h:head> 
<h:body>
<ui:composition>
   <ui:include src="/application/register_employee/register_employee_common.xhtml"></ui:include>
        <fieldset class="fieldset">
		<legend class="legend"><font color="orange" size="4">Salary Details</font></legend>
    	<table id="Salary Details" class="table" cellpadding="10" style="width: 40%;border: 0px">
           <tbody>

			<tr>
				<td style="width:100px;"><h:outputText value="Basic :" /></td>
				<td style="width:140px; text-align: left;"><h:inputText required="true" requiredMessage="Enter Basic Salary"  styleClass="inputText" value="#{employeeMB.model.empSalInfo.basic}" id="basicSal" disabled="#{menuBean.mode eq 'view'}"
				/></td>
				<td style="width:100px"><rich:message for="basicSal"/></td>
				
			</tr>
			<tr>
				<td style="width:100px"><h:outputText value="Transport :" /></td>
				<td style="width:140px;text-align: left;"><h:inputText styleClass="inputText" value="#{employeeMB.model.empSalInfo.transport}" id="trasnportSal" disabled="#{menuBean.mode eq 'view'}"/></td>

			</tr>
			<tr>
				<td style="width:100px"><h:outputText value="Housing :" /></td>
				<td style="width:140px;text-align: left;"><h:inputText styleClass="inputText" value="#{employeeMB.model.empSalInfo.housing}"  id="housingSal" disabled="#{menuBean.mode eq 'view'}"/></td>

			</tr>
			<tr>
				<td style="width:100px;text-align: left;"><h:outputText value="Other Allowance :" /></td>
				<td style="padding-bottom: 15px;width:140px"><h:inputText styleClass="inputText" value="#{employeeMB.model.empSalInfo.otherAllow}" disabled="#{menuBean.mode eq 'view'}" id="totalOther"/></td>

			</tr>
			<tr>
		  		<td colspan="1"><h:outputText value="--------------------------------------" /></td>
				

			</tr>
			<tr>
				<td style="width:100px"><h:outputText value="Total:" /></td>
				<td style="font-weight: bold; text-align: left;">
				<h:inputText  styleClass="inputText" value="#{employeeMB.model.empSalInfo.total}" id="total" disabled="true">  
				     
                 </h:inputText></td>  
                   

			</tr>
  
	<tr>
				<td colspan="7" style="padding-top: 15px;">
					<center>
							<h:button  value="Reset" styleClass="orange" style="height:30px; width:60px;" /> &nbsp;&nbsp;&nbsp;
							<a4j:commandButton id="salaryFile" value="Save"    execute="@form"
							 actionListener="#{employeeMB.updateEmployee}" styleClass="green" style="height:30px; width:60px;" rendered="#{menuBean.mode eq 'update'}"/>  &nbsp;&nbsp;&nbsp;
							<a4j:commandButton value="Next" actionListener="#{employeeMB.updateSalaryDetails}" render="centreContentForm" oncomplete="navToFamily();" styleClass="green" style="height:30px; width:60px;"/>
					</center>
				</td>
			</tr>   
         </tbody>
		</table>    
		</fieldset>
    	<script>
	
			
				var navToFamily =  function() {
					//alert("reached");
					alert($J("#centreContentForm\\:prevStepValidatedStatus").attr("value"));
					if($J("#centreContentForm\\:prevStepValidatedStatus").attr("value") == 'true'){
						changeCenterPage('/application/register_employee/family.xhtml','family_item');
					    validate(false);
					  }
					else
						alert("Validation Not Passed From Server Side")
					};
					
			 $(document).ready(function(){
						 
             //iterate through each textboxes and add keyup
		       $(".inputText").each(function() {
		 
		            $(this).keyup(function(){
		            	calculateSum();
		            }); 
		        });
		 
	          });         
           
			 function calculateSum() {
				   var sum = 0;
				   document.getElementById('centreContentForm:total').value='';
			        //iterate through each textboxes and add the values
			        $(".inputText").each(function() {
			            //add only if the value is number
			             if(this.value.length!=0){
			              if(!isNaN(this.value) ) {
			            	 sum += parseFloat(this.value);
			               }
			              else{
			            	 alert("Plese Enter Number only");
			            	 this.value="";
			                 return false;
			              }
			             }
			        });
			    //   $(".outputText").text(sum.toFixed(2));
			       document.getElementById('centreContentForm:total').value=sum.toFixed(2)
			    
			    }
			 
			
			 
		   
	
					
			
			</script>
    </ui:composition>
</h:body> 
</html>
