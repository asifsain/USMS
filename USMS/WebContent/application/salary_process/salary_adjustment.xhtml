<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:my="http://java.sun.com/jsf/composite/components"> 
   
<h:head></h:head> 

<h:body>
<ui:composition>
	<ui:include src="/application/register_employee/register_employee_common.xhtml"></ui:include>
	  <fieldset class="fieldset">
		<legend class="legend"><font color="orange" size="4">Adjustment Detail</font></legend>
       <table id="Salary_adjustment" class="table" cellpadding="10" style="width: 75%" align="center">
               <tbody>
               <tr>
				<td style="width: 100px"><h:outputText value="Employee Id :" /></td>
				<td style="width: 100px"><h:inputText styleClass="inputText" value="#{salaryProcessMB.model.empInfo.empNo}" size="25"   disabled="true"/></td>

			</tr>
			<tr>
				<td style="width:140px"><h:outputText value="Employee Name :" /></td>
				<td style="width:200px"><h:inputText styleClass="inputText" value="#{salaryProcessMB.model.empInfo.firstName} #{salaryProcessMB.model.empInfo.lastName}" size="25"  disabled="true" /></td>

			</tr>  
			
			<tr>
				<td style="width:140px"><h:outputText value="Adjustment Type :" /></td>
				<td style="width:200px"><h:selectOneMenu  id="adjustmentType"   value="#{salaryProcessMB.model.empSalAdj.adjType}" styleClass="select">
				    <f:selectItem itemLabel="Medical Reimb - Employee" itemValue="medicalReimb_employee"/>
					<f:selectItem itemLabel="Medical Reimb - Child 1" itemValue="medicalReimb_Child1"/>
					<f:selectItem itemLabel="Medical Reimb - Child 2" itemValue="medicalReimb_Child2"/>
					<f:selectItem itemLabel="Medical Reimb - Spouse" itemValue="medicalReimb_Spouse"/>
					<f:selectItem itemLabel="Emirates Id - Employee" itemValue="emiratesid_Employee"/>
					<f:selectItem itemLabel="Emirates Id - Child 1" itemValue="emiratesid_Child1"/>
					<f:selectItem itemLabel="Emirates Id - Child 2" itemValue="emiratesid_Child2"/>
					<f:selectItem itemLabel="Emirates Id - Spouse" itemValue="emiratesid_Spouse"/>
					<f:selectItem itemLabel="Air Ticket - Employee" itemValue="airticket_Employee"/>
					<f:selectItem itemLabel="Air Ticket - Child 1" itemValue="airTicket_Child1"/>
					<f:selectItem itemLabel="Air Ticket - Child 2" itemValue="airTicket_Child 2"/>
					<f:selectItem itemLabel="Air Ticket - Spouse" itemValue="airTicket_Spouse"/>
				
				 </h:selectOneMenu></td>
				
			</tr>
			<tr>
				<td style="width:140px"><h:outputText value="Adjustment Date :" /></td>
				<td style="width:200px"><rich:calendar   value="#{salaryProcessMB.model.empSalAdj.adjDt}" id="arjDate"></rich:calendar></td>

			</tr>
			<tr>
				<td style="width:140px"><h:outputText value="Adjustment Amount :" /></td>
				<td style="width:200px"><h:inputText styleClass="inputText" size="25" value="#{salaryProcessMB.model.empSalAdj.amt}"  id="adjAmount" onblur="validateNumber(this)" />
				
				 <h:selectOneRadio value="#{salaryProcessMB.model.empSalAdj.amtAdjFlag}" style="border:0px;width:200px;">
                 <f:selectItem itemLabel="Debit" itemValue="D"></f:selectItem>
                 <f:selectItem itemLabel="Credit" itemValue="C"></f:selectItem> 
                </h:selectOneRadio>
				 </td>
           
            </tr>
        
			<tr>
				<td style="width:140px"><h:outputText value="Adjustment Description :"/></td>
				<td style="padding-bottom: 15px;width:200px" ><h:inputText styleClass="inputText" size="25" value="#{salaryProcessMB.model.empSalAdj.desc2}" id="adjDescription"/></td>

			</tr>    

				<tr>
				<td style="width:140px"><h:outputText value="Aproved By :" /></td>
				<td style="width:200px"><h:inputText styleClass="inputText" size="25" value="#{salaryProcessMB.model.empSalAdj.apprBy}"  id="aproveBy" /></td>

			</tr>
			 <tr>
				<td style="width:140px"><h:outputText value="File Upload :"/></td>
				<td style="width:200px"><rich:fileUpload  id="softCopy" acceptedTypes="jpg,pdf, gif, png, bmp,txt,xls,xlsx" execute="@this" fileUploadListener="#{salaryProcessMB.salAdjSoftFileUploadListener}"
                		 ontyperejected="alert('Only JPG, GIF, PNG and BMP files are accepted');" maxFilesQuantity="1" listHeight="1"   style="width:250px;" >
               		 	<a4j:ajax event="uploadcomplete" execute="@none"/>
               		 	<f:attribute name="fileType" value=" Salary_Adjustment"/>
               		 	<f:attribute name="ownerType" value="employee" />
           		 </rich:fileUpload></td>
           		 

			</tr>
		
			

	<tr>
				<td colspan="7" style="padding-top: 15px;">
					<center>
							<a4j:commandButton styleClass="orange" style="height:30px; width:60px;" value="Reset" execute="@this" render="@form" actionListener="#{salaryProcessMB.resetAdjustment}"/>
							&nbsp;&nbsp;&nbsp;
							<a4j:commandButton id="savebtn" value="Save"    execute="@form"   actionListener="#{salaryProcessMB.saveSalAdj}"
							  styleClass="green" style="height:30px; width:60px;"/>
					</center>
				</td>
			</tr>
			</tbody>
            </table>
            </fieldset>
            <br/>
             <fieldset class="fieldset">
		     <legend class="legend"><font color="orange" size="4">Adjustment History</font></legend>
              
			  <table class="table" cellpadding="10" style="width: 50%;">
			  <tbody>
			     <tr > 
			    <td><h:outputText value="Month:" />&nbsp;&nbsp; 
			     <h:selectOneMenu  value="#{salaryProcessMB.model.month}" >
                       <f:selectItems value="#{salaryProcessMB.model.months}"></f:selectItems>
                       
                     </h:selectOneMenu>
			      </td>
<!-- 			     <td style="height:100px;vertical-align: middle;"> -->
                 
			        
<!-- 			     </td> -->
				  
				  <td><h:outputText value="Year:" />&nbsp;&nbsp;
				     <h:selectOneMenu value="#{salaryProcessMB.model.year}" >
                     <f:selectItems value="#{salaryProcessMB.model.years}"></f:selectItems>
                     
                     </h:selectOneMenu>
				  </td>
				
                  
                 
                      
                     <td><a4j:commandButton value="Search" execute="@form"   actionListener="#{salaryProcessMB.selectSalAdj}" oncomplete="showHistry()" 
 							render="table"    styleClass="green" style="height:30px; width:60px;"/></td> 
                
			  </tr>
			  </tbody>
           </table>
            
            <div align="right" id="salArjustnent" style="visibility:hidden; float:left;right:50px;top:200px;height:100%; width:500px; margin-left:20px;">

         <rich:dataTable  value="#{salaryProcessMB.model.salaryArjList}"  var="record"  id="table" style="width:100%;height:100%;text-align:center"
                styleClass="searchTable"  
               headerClass="searchTableHeader"
                rowClasses="searchTableOddRow,searchTableEvenRow">
       <rich:column  width="15%">
     <f:facet name="header">
       <h:outputText  value="Adjustment Type" ></h:outputText>
       </f:facet>
       <h:outputText value="#{record.adjType}"></h:outputText>
    </rich:column>
     <rich:column   width="10%">
      <f:facet name="header">
       <h:outputText  value="Debit/Credit" ></h:outputText> 
      </f:facet>
       <h:outputText  value="#{record.amtAdjFlag eq 'D' ? 'Debit' : 'Credit'}"></h:outputText>
    </rich:column>
    
     
     <rich:column  width="10%">
     <f:facet name="header">
      <h:outputText  value="Date" ></h:outputText>
     </f:facet>
        <h:outputText value="#{record.adjDt}" converter="javax.faces.DateTime"></h:outputText>
    </rich:column>
     <rich:column  width="25%">
     <f:facet name="header">
      <h:outputText  value="Adjustment Amount" ></h:outputText>
     </f:facet>
        <h:outputText value="#{record.amt}"></h:outputText>
    </rich:column>
     <rich:column  width="15%">
     <f:facet name="header">
      <h:outputText  value="Approved By" ></h:outputText>
     </f:facet>
        <h:outputText value="#{record.apprBy}"></h:outputText>
    </rich:column>
    
     <rich:column  width="25%" >
     <f:facet name="header">
      <h:outputText  value="View/Download" ></h:outputText>
     </f:facet>
       <h:commandLink   execute="@this" action="#{salaryProcessMB.salAdjSoftFileDownload}" disabled="#{record.softFilePath eq null}">
             <f:setPropertyActionListener target="#{salaryProcessMB.model.empSalAdj}" value="#{record}"></f:setPropertyActionListener>
            <h:graphicImage  value="/resources/images/editrecord.gif"/>
       </h:commandLink>
      
    </rich:column>
  
     <f:facet name="footer">
         <rich:dataScroller id="scroller" for="table" maxPages="10" renderIfSinglePage="false" boundaryControls="hide" fastControls="hide" />     
     </f:facet>
    </rich:dataTable>
    </div>
	</fieldset>	 
		      <script >
			        var showHistry =  function() {
				   
				     document.getElementById('salArjustnent').style.visibility="visible";
				   
                   };
                   
                   
                   
               </script>
    	
    </ui:composition>
</h:body> 
          
</html>
